{"version":3,"file":"commonHelpers.js","sources":["../src/js/notification.js","../src/js/fetchCountries.js","../src/js/index.js"],"sourcesContent":["import iziToast from \"izitoast\";\n\nexport function sendIziToast(text, type) {\n  iziToast[type]({\n    message: text,\n    position: \"topCenter\",\n    transitionIn: 'fadeInDown'\n  });\n}","import { sendIziToast } from \"./notification\";\n\nexport function fetchCountries(name) {\n    if (name === '') {\n        return [];\n    }\n    const params = new URLSearchParams({\n        fields: ['name', 'capital', 'population', 'languages', 'flags'].join(','),\n    });\n    const url = `https://restcountries.com/v3.1/name/${name}?${params}`\n    return fetch(url)\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            }\n            if (response.status === 404) {\n                sendIziToast('Oops, there is no country with that name', 'error');\n                return [];\n            }\n            sendIziToast(response.statusText, 'error');\n            throw new Error(response.statusText);\n        })\n        .catch(err => {\n            console.error(err);\n            sendIziToast('Sorry, something went wrong', 'error');\n            return [];\n        });\n}","import \"izitoast/dist/css/iziToast.min.css\";\nimport debounce from \"lodash.debounce\";\nimport { fetchCountries } from \"./fetchCountries\";\nimport { sendIziToast } from \"./notification\";\n\nconst selectors = {\n    input: document.querySelector('input#search-box'),\n    catInfo: document.querySelector('.cat-info'),\n};\n\nfunction countriesList(countries) {\n    const countriesList = countries.map(country => `\n    <li class=\"country-name-block\">\n        <img src=\"${country.flags.svg}\" alt=\"${country.name.common}\" width=\"20\" height=\"15\">\n        <p>${country.name.common}</p>\n    </li>`).join('');\n    return `<ul class=\"countries-list\">${countriesList}</ul>`;\n}\n\nfunction countryCard(country) {\n    return `<div class=\"country-card\">\n    <div class=\"country-name-block\">\n        <img src=\"${country[0].flags.svg}\" alt=\"${country[0].name.common}\" width=\"20\" height=\"15\">\n        <h2>${country[0].name.official}</h2>\n    </div>\n    <p><b>Capital:</b> ${country[0].capital}</p>\n    <p><b>Population:</b> ${country[0].population}</p>\n    <p><b>Languages:</b> ${Object.values(country[0].languages).join(', ')}</p>\n    </div>`;\n}\n\nfunction handlerInput(e) {\n    const countryName = e.target.value.trim();\n    if (countryName === '') {\n        selectors.catInfo.innerHTML = '';\n        return;\n    }\n    fetchCountries(countryName)\n        .then(data => {\n            if (data.length > 10) {\n                sendIziToast('Too many matches found. Please enter a more specific name!', 'info');\n                return;\n            }\n            if (data.length === 1) {\n                selectors.catInfo.innerHTML = countryCard(data);\n                return;\n            }\n            if (data.length <= 10) {\n                selectors.catInfo.innerHTML = countriesList(data);\n                return;\n            }\n            if (data.length === 0) {\n                selectors.catInfo.innerHTML = '';\n                return;\n            }\n        })\n        .catch(err => {\n            console.error(err);\n            sendIziToast('Sorry, something went wrong', 'error');\n        });\n}\n\nselectors.input.addEventListener('input', debounce(handlerInput, 300));\n\n"],"names":["sendIziToast","text","type","iziToast","fetchCountries","name","params","url","response","err","selectors","countriesList","countries","country","countryCard","handlerInput","countryName","data","debounce"],"mappings":"6vBAEO,SAASA,EAAaC,EAAMC,EAAM,CACvCC,EAASD,CAAI,EAAE,CACb,QAASD,EACT,SAAU,YACV,aAAc,YAClB,CAAG,CACH,CCNO,SAASG,EAAeC,EAAM,CACjC,GAAIA,IAAS,GACT,MAAO,GAEX,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,OAAQ,CAAC,OAAQ,UAAW,aAAc,YAAa,OAAO,EAAE,KAAK,GAAG,CAChF,CAAK,EACKC,EAAM,uCAAuCF,CAAI,IAAIC,CAAM,GACjE,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAY,CACd,GAAIA,EAAS,GACT,OAAOA,EAAS,OAEpB,GAAIA,EAAS,SAAW,IACpB,OAAAR,EAAa,2CAA4C,OAAO,EACzD,GAEX,MAAAA,EAAaQ,EAAS,WAAY,OAAO,EACnC,IAAI,MAAMA,EAAS,UAAU,CAC/C,CAAS,EACA,MAAMC,IACH,QAAQ,MAAMA,CAAG,EACjBT,EAAa,8BAA+B,OAAO,EAC5C,GACV,CACT,CCtBA,MAAMU,EAAY,CACd,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,WAAW,CAC/C,EAEA,SAASC,EAAcC,EAAW,CAM9B,MAAO,8BALeA,EAAU,IAAIC,GAAW;AAAA;AAAA,oBAE/BA,EAAQ,MAAM,GAAG,UAAUA,EAAQ,KAAK,MAAM;AAAA,aACrDA,EAAQ,KAAK,MAAM;AAAA,UACtB,EAAE,KAAK,EAAE,CACmC,OACtD,CAEA,SAASC,EAAYD,EAAS,CAC1B,MAAO;AAAA;AAAA,oBAESA,EAAQ,CAAC,EAAE,MAAM,GAAG,UAAUA,EAAQ,CAAC,EAAE,KAAK,MAAM;AAAA,cAC1DA,EAAQ,CAAC,EAAE,KAAK,QAAQ;AAAA;AAAA,yBAEbA,EAAQ,CAAC,EAAE,OAAO;AAAA,4BACfA,EAAQ,CAAC,EAAE,UAAU;AAAA,2BACtB,OAAO,OAAOA,EAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,IAAI,CAAC;AAAA,WAEzE,CAEA,SAASE,EAAa,EAAG,CACrB,MAAMC,EAAc,EAAE,OAAO,MAAM,KAAI,EACvC,GAAIA,IAAgB,GAAI,CACpBN,EAAU,QAAQ,UAAY,GAC9B,MACH,CACDN,EAAeY,CAAW,EACrB,KAAKC,GAAQ,CACV,GAAIA,EAAK,OAAS,GAAI,CAClBjB,EAAa,6DAA8D,MAAM,EACjF,MACH,CACD,GAAIiB,EAAK,SAAW,EAAG,CACnBP,EAAU,QAAQ,UAAYI,EAAYG,CAAI,EAC9C,MACH,CACD,GAAIA,EAAK,QAAU,GAAI,CACnBP,EAAU,QAAQ,UAAYC,EAAcM,CAAI,EAChD,MACH,CACD,GAAIA,EAAK,SAAW,EAAG,CACnBP,EAAU,QAAQ,UAAY,GAC9B,MACH,CACb,CAAS,EACA,MAAMD,GAAO,CACV,QAAQ,MAAMA,CAAG,EACjBT,EAAa,8BAA+B,OAAO,CAC/D,CAAS,CACT,CAEAU,EAAU,MAAM,iBAAiB,QAASQ,EAASH,EAAc,GAAG,CAAC"}