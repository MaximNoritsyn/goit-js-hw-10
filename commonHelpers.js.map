{"version":3,"file":"commonHelpers.js","sources":["../src/index.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport debounce from \"lodash.debounce\";\n\nconst selectors = {\n    input: document.querySelector('#search'),\n    catInfo: document.querySelector('.cat-info'),\n};\n\nfunction sendIziToast(text, type) {\n  iziToast[type]({\n    message: text,\n    position: \"topCenter\",\n    transitionIn: 'fadeInDown'\n  });\n}\n\nfunction fetchCountries(name) {\n    return fetch(`https://restcountries.com/v3.1/name/${name}`)\n        .then(response => {\n            if (response.ok) {\n                return response.json();\n            }\n            console.log(response);\n            if (response.status === 404) {\n                sendIziToast('Oops, there is no country with that name', 'error');\n                return [];\n            }\n            throw new Error(response.statusText);\n        })\n        .catch(err => {\n            sendIziToast(err, 'error');\n        });\n}\n\nfunction countriesList(countries) {\n    const countriesList = countries.map(country => `\n    <li class=\"country-name-block\">\n        <img src=\"${country.flags.svg}\" alt=\"${country.name.common}\" width=\"20\" height=\"15\">\n        <p>${country.name.common}</p>\n    </li>`).join('');\n    return `<ul class=\"countries-list\">${countriesList}</ul>`;\n}\n\nfunction countryCard(country) {\n    return `<div class=\"country-card\">\n    <div class=\"country-name-block\">\n        <img src=\"${country[0].flags.svg}\" alt=\"${country[0].name.common}\" width=\"20\" height=\"15\">\n        <h2>${country[0].name.official}</h2>\n    </div>\n    <p><b>Capital:</b> ${country[0].capital}</p>\n    <p><b>Population:</b> ${country[0].population}</p>\n    <p><b>Languages:</b> ${Object.values(country[0].languages).join(', ')}</p>\n    </div>`;\n}\n\nfunction handlerInput(e) {\n    const countryName = e.target.value;\n    if (countryName === '') {\n        selectors.catInfo.innerHTML = '';\n        return;\n    }\n    fetchCountries(countryName)\n        .then(data => {\n            if (data.length > 10) {\n                sendIziToast('Too many matches found. Please enter a more specific name!', 'info');\n                return;\n            }\n            if (data.length === 1) {\n                selectors.catInfo.innerHTML = countryCard(data);\n                return;\n            }\n            if (data.length <= 5) {\n                console.log(data);\n                selectors.catInfo.innerHTML = countriesList(data);\n                return;\n            }\n        })\n        .catch(err => {\n        sendIziToast(err, 'error');\n        });\n}\n\nselectors.input.addEventListener('input', debounce(handlerInput, 300));\n\n"],"names":["selectors","sendIziToast","text","type","iziToast","fetchCountries","name","response","err","countriesList","countries","country","countryCard","handlerInput","e","countryName","data","debounce"],"mappings":"6vBAIA,MAAMA,EAAY,CACd,MAAO,SAAS,cAAc,SAAS,EACvC,QAAS,SAAS,cAAc,WAAW,CAC/C,EAEA,SAASC,EAAaC,EAAMC,EAAM,CAChCC,EAASD,CAAI,EAAE,CACb,QAASD,EACT,SAAU,YACV,aAAc,YAClB,CAAG,CACH,CAEA,SAASG,EAAeC,EAAM,CAC1B,OAAO,MAAM,uCAAuCA,CAAI,EAAE,EACrD,KAAKC,GAAY,CACd,GAAIA,EAAS,GACT,OAAOA,EAAS,OAGpB,GADA,QAAQ,IAAIA,CAAQ,EAChBA,EAAS,SAAW,IACpB,OAAAN,EAAa,2CAA4C,OAAO,EACzD,GAEX,MAAM,IAAI,MAAMM,EAAS,UAAU,CAC/C,CAAS,EACA,MAAMC,GAAO,CACVP,EAAaO,EAAK,OAAO,CACrC,CAAS,CACT,CAEA,SAASC,EAAcC,EAAW,CAM9B,MAAO,8BALeA,EAAU,IAAIC,GAAW;AAAA;AAAA,oBAE/BA,EAAQ,MAAM,GAAG,UAAUA,EAAQ,KAAK,MAAM;AAAA,aACrDA,EAAQ,KAAK,MAAM;AAAA,UACtB,EAAE,KAAK,EAAE,CACmC,OACtD,CAEA,SAASC,EAAYD,EAAS,CAC1B,MAAO;AAAA;AAAA,oBAESA,EAAQ,CAAC,EAAE,MAAM,GAAG,UAAUA,EAAQ,CAAC,EAAE,KAAK,MAAM;AAAA,cAC1DA,EAAQ,CAAC,EAAE,KAAK,QAAQ;AAAA;AAAA,yBAEbA,EAAQ,CAAC,EAAE,OAAO;AAAA,4BACfA,EAAQ,CAAC,EAAE,UAAU;AAAA,2BACtB,OAAO,OAAOA,EAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,IAAI,CAAC;AAAA,WAEzE,CAEA,SAASE,EAAaC,EAAG,CACrB,MAAMC,EAAcD,EAAE,OAAO,MAC7B,GAAIC,IAAgB,GAAI,CACpBf,EAAU,QAAQ,UAAY,GAC9B,MACH,CACDK,EAAeU,CAAW,EACrB,KAAKC,GAAQ,CACV,GAAIA,EAAK,OAAS,GAAI,CAClBf,EAAa,6DAA8D,MAAM,EACjF,MACH,CACD,GAAIe,EAAK,SAAW,EAAG,CACnBhB,EAAU,QAAQ,UAAYY,EAAYI,CAAI,EAC9C,MACH,CACD,GAAIA,EAAK,QAAU,EAAG,CAClB,QAAQ,IAAIA,CAAI,EAChBhB,EAAU,QAAQ,UAAYS,EAAcO,CAAI,EAChD,MACH,CACb,CAAS,EACA,MAAMR,GAAO,CACdP,EAAaO,EAAK,OAAO,CACjC,CAAS,CACT,CAEAR,EAAU,MAAM,iBAAiB,QAASiB,EAASJ,EAAc,GAAG,CAAC"}